"use strict";var w=Object.defineProperty,$=(u,c,n)=>c in u?w(u,c,{enumerable:!0,configurable:!0,writable:!0,value:n}):u[c]=n,i=(u,c,n)=>($(u,"symbol"!=typeof c?c+"":c,n),n);(self.webpackChunkpunto_digital=self.webpackChunkpunto_digital||[]).push([[621],{6621:(u,c,n)=>{n.r(c),n.d(c,{UserModule:()=>m});var p=n(8583),d=n(2498),r=n(665),e=n(639),h=n(3364),b=n(728),F=n(1453);const y=function(o){return["/","usuarios",o]};function C(o,t){if(1&o){const s=e.EpF();e.TgZ(0,"article",6),e.TgZ(1,"div",7),e.TgZ(2,"h2",8),e._uU(3),e.qZA(),e.TgZ(4,"small",9),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",10),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"button",11),e.NdJ("click",function(){const S=e.CHM(s).$implicit,A=e.oxw();return A.openEditor(),A.loadData(S)}),e.TgZ(12,"span",12),e._uU(13,"edit"),e.qZA(),e._uU(14," Editar "),e.qZA(),e.qZA()}if(2&o){const s=t.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(5,y,s.nick_name)),e.xp6(1),e.Oqu(s.nick_name),e.xp6(2),e.Oqu(s.activo_usuario?"Activo":"Inactivo"),e.xp6(3),e.hij("Contrase\xf1a: ",s.password,""),e.xp6(2),e.hij("Tipo de usuario: ",s.Nombre_Tipo_Usuario,"")}}function N(o,t){if(1&o&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&o){const s=t.$implicit;e.Q6J("value",s.nick_name),e.xp6(1),e.HOy(" ",s.Nombre1," ",s.Nombre2," ",s.Apellido1," ",s.Apellido2," ")}}function x(o,t){if(1&o&&(e.TgZ(0,"label"),e.TgZ(1,"h2"),e._uU(2,"Crear usuario de "),e.qZA(),e.TgZ(3,"select",23),e.YNc(4,N,2,5,"option",19),e.ALo(5,"async"),e.qZA(),e.qZA()),2&o){const s=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",e.lcZ(5,1,s.persons$))}}function q(o,t){if(1&o&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&o){const s=t.$implicit;e.Q6J("value",s.Id_Tipo),e.xp6(1),e.Oqu(s.Nombre_Tipo_Usuario)}}function O(o,t){if(1&o){const s=e.EpF();e.TgZ(0,"aside",13),e.TgZ(1,"form",14),e.NdJ("submit",function(){e.CHM(s);const _=e.oxw();return _.isCreateMode?_.createUser():_.updateUser()}),e.TgZ(2,"fieldset"),e.TgZ(3,"legend"),e.YNc(4,x,6,3,"label",15),e.qZA(),e.TgZ(5,"label"),e._uU(6," Nombre de usuario "),e._UZ(7,"input",16),e.qZA(),e.TgZ(8,"label"),e._uU(9," Contrase\xf1a "),e._UZ(10,"input",17),e.qZA(),e.TgZ(11,"label"),e._uU(12," Tipo de usuario "),e.TgZ(13,"select",18),e.YNc(14,q,2,2,"option",19),e.qZA(),e.qZA(),e.TgZ(15,"label",20),e._UZ(16,"input",21),e._uU(17," Est\xe1 activo "),e.qZA(),e._UZ(18,"input",22),e.qZA(),e.qZA(),e.qZA()}if(2&o){const s=e.oxw(),a=e.MAs(8);e.xp6(1),e.Q6J("formGroup",s.userForm),e.xp6(3),e.Q6J("ngIf",s.isCreateMode)("ngIfElse",a),e.xp6(10),e.Q6J("ngForOf",s.userTypes),e.xp6(4),e.Q6J("value",s.isCreateMode?"Crear":"Editar")}}function I(o,t){1&o&&(e.TgZ(0,"h2"),e._uU(1,"Editar usuario "),e.qZA())}const T=class{constructor(t,s,a){i(this,"userService"),i(this,"userTypeService"),i(this,"noUserService"),i(this,"users$"),i(this,"userForm",new r.cw({})),i(this,"isEditorOpen",!1),i(this,"userTypes"),i(this,"persons$"),i(this,"isCreateMode",!1),this.userService=t,this.userTypeService=s,this.noUserService=a}ngOnInit(){this.users$=this.userService.getUsers(),this.userTypeService.getUserTypes().subscribe(t=>this.userTypes=t),this.userForm=new r.cw({nick_name:new r.NI(""),activo_usuario:new r.NI(!1),password:new r.NI(""),Nombre_Tipo_Usuario:new r.NI(0),Id_Tipo:new r.NI(0)})}loadData(t){this.isCreateMode=!1;const s=this.userTypes.find(a=>a.Nombre_Tipo_Usuario===t.Nombre_Tipo_Usuario);t.Id_Tipo=s.Id_Tipo,t.Fecha_Fin=new Date(t.Fecha_Fin),this.userForm.setValue(t)}openEditor(){this.isEditorOpen=!0}updateUser(){const t=this.userForm.value;t.activo_usuario=Number(t.activo_usuario),this.userService.updateUsers(this.userForm.value).subscribe(s=>this.closeAndUpdate(s))}cleanFields(){this.isCreateMode=!0,this.persons$=this.noUserService.getPersonsWithoutUser(),this.userForm.setValue({nick_name:"",activo_usuario:!1,password:"",Nombre_Tipo_Usuario:0,Id_Tipo:0})}createUser(){this.userService.createUsers(this.userForm.value).subscribe(t=>this.closeAndUpdate(t))}closeAndUpdate(t){t?.error||(this.isEditorOpen=!1,this.users$=this.userService.getUsers())}};let g=T;function E(o,t){if(1&o&&(e.TgZ(0,"div",2),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"h3"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.qZA()),2&o){const s=t.$implicit;e.xp6(2),e.hij("USUARIO: ",s.nick_name,""),e.xp6(2),e.hij("TIPO: ",s.Nombre_Tipo_Usuario,""),e.xp6(2),e.hij("Contrase\xf1a: ",s.password,""),e.xp6(2),e.hij("\xbfEst\xe1 activo?: ",s.activo_usuario?"S\xed":"No","")}}i(g,"\u0275fac",function(s){return new(s||T)(e.Y36(h.f),e.Y36(b.j),e.Y36(F.R))}),i(g,"\u0275cmp",e.Xpm({type:T,selectors:[["app-user-page"]],decls:9,vars:4,consts:[[1,"main"],["class","card",4,"ngFor","ngForOf"],[1,"btn","btn--circle","btn--float",3,"click"],[1,"material-symbols-outlined","btn__icon","btn--3h"],["class","aside",4,"ngIf"],["EditMessage",""],[1,"card"],[1,"card__title"],[1,"card__title--route",3,"routerLink"],[1,"card__status"],[1,"card__content"],["type","button",1,"btn",3,"click"],[1,"material-symbols-outlined"],[1,"aside"],[3,"formGroup","submit"],[4,"ngIf","ngIfElse"],["formControlName","nick_name","type","text"],["formControlName","password","type","text"],["formControlName","Id_Tipo"],[3,"value",4,"ngFor","ngForOf"],[1,"form__checkbox"],["formControlName","activo_usuario","type","checkbox"],["type","submit",1,"btn","btn--primary",3,"value"],["formControlName","nick_name"],[3,"value"]],template:function(s,a){1&s&&(e.TgZ(0,"main",0),e.YNc(1,C,15,7,"article",1),e.ALo(2,"async"),e.TgZ(3,"button",2),e.NdJ("click",function(){return a.cleanFields(),a.openEditor()}),e.TgZ(4,"span",3),e._uU(5,"add"),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,O,19,5,"aside",4),e.YNc(7,I,2,0,"ng-template",null,5,e.W1O)),2&s&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,a.users$)),e.xp6(5),e.Q6J("ngIf",a.isEditorOpen))},directives:[p.sg,p.O5,d.rH,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,r.EJ,r.Wl,r.YN,r.Kr],pipes:[p.Ov],styles:[""]}));const f=class{constructor(t,s){i(this,"userService"),i(this,"activatedRoute"),i(this,"user$"),this.userService=t,this.activatedRoute=s}ngOnInit(){const{id:t}=this.activatedRoute.snapshot.params;this.user$=this.userService.getUser(t)}};let Z=f;i(Z,"\u0275fac",function(s){return new(s||f)(e.Y36(h.f),e.Y36(d.gz))}),i(Z,"\u0275cmp",e.Xpm({type:f,selectors:[["app-user-page"]],decls:3,vars:3,consts:[[1,"content","content--center"],["class","message",4,"ngFor","ngForOf"],[1,"message"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0),e.YNc(1,E,9,4,"div",1),e.ALo(2,"async"),e.qZA()),2&s&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,a.user$)))},directives:[p.sg],pipes:[p.Ov],styles:[""]}));const J=[{path:"",component:g},{path:":id",component:Z}],v=class{};let l=v;i(l,"\u0275fac",function(s){return new(s||v)}),i(l,"\u0275mod",e.oAB({type:v})),i(l,"\u0275inj",e.cJS({imports:[[d.Bz.forChild(J)],d.Bz]}));const U=class{};let m=U;i(m,"\u0275fac",function(s){return new(s||U)}),i(m,"\u0275mod",e.oAB({type:U})),i(m,"\u0275inj",e.cJS({imports:[[p.ez,l,r.UX]]}))}}]);